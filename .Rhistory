library(lattice)
library(ggplot2)
install.packages("ggplot2")
library(plyr)
## set working directory
setwd(".\\Github\\EDA-Project2")
## assumes that the source data files are in a subfolder named 'data'
## NEI will contain all of the PM2.5 emissions data for 1999, 2002, 2005, and 2008.
## For each year, the table contains number of tons of PM2.5 emitted from a specific
## type of source for the entire year.
NEI <- readRDS("data\\summarySCC_PM25.rds")
SCC <- readRDS("data\\Source_Classification_Code.rds")
## Plot 1
## Have total emissions from PM2.5 decreased in the United States from 1999 to 2008?
## Using the base plotting system, make a plot showing the total PM2.5 emission from
## all sources for each of the years 1999, 2002, 2005, and 2008.
## Get aggregate totals for each year
totalEmissions = aggregate(Emissions ~ year, data = NEI, sum)
barplot(totalEmissions$Emissions,
names.arg = totalEmissions$year,
main = "US Total Emissions",
xlab = "Year",
ylab = expression('PM'[25]*' Emissions (Tons)') )
balt = NEI[which(NEI$fips == "24510"), ]
## convert the 'year' variable to a factor
balt$year = as.factor(balt$year)
## aggregate the Baltimore results
baltEmissions = aggregate(Emissions ~ year, data = balt, sum)
barplot(baltEmissions$Emissions,
names.arg = baltEmissions$year,
main = "Baltimore Total Emissions",
xlab = "Year",
ylab = expression('PM'[25]*' Emissions (Tons)') )
balt = NEI[which(NEI$fips == "24510"), ]
## convert the 'year' variable to a factor
balt$year = as.factor(balt$year)
## get the summary data
baltEmissions = ddply(balt, c("year", "type"), summarize, sum = sum(Emissions))
qplot(data = baltEmissions,
x = year,
y = sum,
ylab = expression('PM'[25]*' Emissions (Tons)'),
xlab = "Year",
main = "Baltimore Emission Sources",
fill = type,
geom = "bar",
stat="identity",
position = "dodge")
install.packages("manipulate")
qplot(data = baltEmissions,
x = year,
y = sum,
ylab = expression('PM'[25]*' Emissions (Tons)'),
xlab = "Year",
main = "Baltimore Emission Sources",
fill = type,
geom = "bar",
stat="identity",
position = "dodge")
library(lattice)
library(ggplot2)
library(plyr)
tEmissions = ddply(balt, c("year", "type"), summarize, sum = sum(Emissions))
qplot(data = baltEmissions,
x = year,
y = sum,
ylab = expression('PM'[25]*' Emissions (Tons)'),
xlab = "Year",
main = "Baltimore Emission Sources",
fill = type,
geom = "bar",
stat="identity",
position = "dodge")
vehicle_scc = SCC[grep("Vehicle", SCC$EI.Sector) , ]
vehicle = NEI[NEI$SCC %in% vehicle_scc$SCC, ]
## get the data for the target cities
cities = vehicle[vehicle$fips %in% c("24510", "06037"), ]
cities$fips[which(cities$fips == "06037")] = "Los Angeles"
cities$fips[which(cities$fips == "24510")] = "Baltimore"
names(cities)[1] = "Cities"
cityEmissions = ddply(cities, c("year", "Cities"), summarize, sum = sum(Emissions))
cityEmissions$year = as.factor(cityEmissions$year)
cityEmissions$year = as.factor(cityEmissions$year)
qplot(data = cityEmissions,
x = year,
y = sum,
ylab = expression('PM'[25]*' Emissions (Tons)'),
xlab = "Year",
main = "Vehicle Emission Sources",
fill = Cities,
geom = "bar",
stat="identity",
position = "dodge")
library(plyr)
library(ggplot2)
library(reshape2)
setwd("~/GitHub/HomeCode")
veh = read.csv("data\\vehicles.csv", stringsAsFactors = FALSE, sep = ",", na.strings = "")
dim(veh)
head(veh)
unique(veh$trany)
names(veh)
length(unique(veh$year))
first_year = min(veh$year)
last_year = max(veh$year)
barplot(table(veh$fuelType1))
veh$trany2 = ifelse(substr(veh$trany, 1, 4) == "Auto", "Auto", "Manual")
